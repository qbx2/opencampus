사용자 인증 (OAuth 2.0)
---------------------------------------------------------------------------------

오픈캠퍼스의 사용자 인증은 **OAuth 2.0** 에 기반합니다.
(본 문서는 Daum Oauth 문서를 참고하여 작성하였습니다)

**Auth URL** ::

  https://apis.opencampus.kr/oauth2/authorize

**Token URL** ::

  https://apis.opencampus.kr/oauth2/token


웹 어플리케이션에서 사용 (Javascript)
---------------------------------------------------------------------------------

**1. 사용자를 오픈캠퍼스 계정에 접근하도록 리다이렉트합니다.**

*URL* ::

  https://apis.opencampus.kr/oauth2/authorize

*Parameters*

+---------------+-------------------------------------+------------------------------+
| 이름          | 값                                  | 설명                         |
+===============+=====================================+==============================+
| client_id     | string(필수)                        | 발급된 App ID                |
+---------------+-------------------------------------+------------------------------+
| redirect_uri  | string(필수)                        | 등록한 redirect_uri          |
+---------------+-------------------------------------+------------------------------+
| response_type | string(필수): "token" 이라고 입력   | Implicit Grant 인증을 위함   |
+---------------+-------------------------------------+------------------------------+

**2. 오픈캠퍼스에서 redirect_uri로 AccessToken 을 발급합니다.**

*예* ::

  http://{redirect.uri}/test.html#access_token=4905ae1a956e3d6a76a83f681fdb565d906e27e6406303526a763adc405


서버 사이드 인증 사용
---------------------------------------------------------------------------------

**1. 사용자를 오픈캠퍼스 계정에 접근하도록 리다이렉트합니다.**

*URL* ::

  https://apis.opencampus.kr/oauth2/authorize

*Parameters*

+---------------+-------------------------------------+--------------------------------+
| 이름          | 값                                  | 설명                           |
+===============+=====================================+================================+
| client_id     | string(필수)                        | 발급된 App ID                  |
+---------------+-------------------------------------+--------------------------------+
| redirect_uri  | string(필수)                        | 등록한 redirect_uri            |
+---------------+-------------------------------------+--------------------------------+
| response_type | string(필수): "code" 이라고 입력    | Authorization code 인증을 위함 |
+---------------+-------------------------------------+--------------------------------+

**2. 인증 확인 및 Authorization code 발급**

리소스 오너를 로그인을 할수있도록 유도 한 후 로그인에 성공하면, redirect_uri에 code를 붙혀서 다시 Redirect 시킵니다.

*예* ::

  http://{redirect.uri}/?code={authorization_code}

**3. 인증 허가 및 Access Token 발급 요청 단계**

content-type이 application/x-www-form-urlencoded인 HTTP POST 요청을 합니다.

*URL* ::

  https://apis.opencampus.kr/oauth2/token

*Parameters*

+---------------+-------------------------------------+-------------------------------------------+
| 이름          | 값                                  | 설명                                      |
+===============+=====================================+===========================================+
| client_id     | string(필수)                        | 발급된 App ID                             |
+---------------+-------------------------------------+-------------------------------------------+
| client_secret | string(필수)                        | 발급된 App Secret                         |
+---------------+-------------------------------------+-------------------------------------------+
| code          | string(필수)                        | 2번 단계에서 발급 받은 authorization code |
+---------------+-------------------------------------+-------------------------------------------+
| grant_type    | string(필수)                        | "authorization_code" 라고 입력            |
+---------------+-------------------------------------+-------------------------------------------+

**4. Access Token 발급**

Access Token을 발급합니다.
::

  {
    "scopes" : ["user"],
    "token_type" : "Bearer",
    "refresh_token" : "fc6f5a70b416c851cbbef9bd445a0f7ea9a67c075c7915a8d5fa95237880d5f7e3a7b0b30f6f12a5924584b8233cdd1f2dff98b18a1017f05fd852b35dd503d3",
    "access_token" : "456aabd8e8b2e3617045fc1320e98952853030b60901ba1d2242af1c766da000",
    "expires_in" : 3600
  }


**OAuth 2.0의 에러코드**

::

  {
    error: "invalid_redirect_uri"
  }

+---------------------------+---------------------------------------------------------+
| 이름                      | 설명                                                    |
+===========================+=========================================================+
| invalid_request           | 올바른 요청이 아닙니다.                                 |
+---------------------------+---------------------------------------------------------+
| invalid_grant             | 올바른 인증 방법이 아닙니다.                            |
+---------------------------+---------------------------------------------------------+
| unauthorized_client       | 올바른 클라이언트가 아닙니다.                           |
+---------------------------+---------------------------------------------------------+
| unsupported_grant_type    | 지원하지 않는 인증 방법입니다.                          |
+---------------------------+---------------------------------------------------------+
| unsupported_response_type | 지원하지 않는 응답 방식입니다.                          |
+---------------------------+---------------------------------------------------------+
| invalid_scope             | 올바른 요청영역이 아닙니다.                             |
+---------------------------+---------------------------------------------------------+
| server_error              | 오픈 API 서비스 내부 시스템 에러.                       |
+---------------------------+---------------------------------------------------------+
| temporary_unavailable     | 오픈 API 서비스 연결 실패.                              |
|                           | 서비스 시스템 과부하 또는 장애로 인한 서비스 연결 실패. |
+---------------------------+---------------------------------------------------------+
